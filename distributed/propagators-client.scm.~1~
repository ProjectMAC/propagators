;;; Client:

(define propagators-port 5390)

(define (client-connect #!optional host port)
  (let ((client (create-rpc-client))
	(port (if (default-object? port) propagators-port port))
	(address (if (default-object? host) (host-address-any) host)))
    (connect-rpc-client client port address)
    client))

(define (client-disconnect client)
  (disconnect-rpc-client client))

(define (client-access-service client service-id password)
  ((bind-rpc-call client "access-thing")
   service-id password))


#|
;;;;  Demo
;;; Assume that the password is "foo".

(define client (client-connect "127.0.0.1" propagators-port))
;Value: client

(define reval
  (client-access-service client 'eval "foo"))
;Value: reval


...



(client-disconnect client)
|#